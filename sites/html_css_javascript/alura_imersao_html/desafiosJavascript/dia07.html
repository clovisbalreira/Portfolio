<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>#7DaysOfCode - 7º Dia</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<style>
  .calculadora{
    background-color: rgba(0, 0, 0, 0.644);
    width: 350px;
    margin: 15px auto;
  }
  table{
    width: 100%;
  }
  caption{
    font-size: 2em;
    padding: 5%;
  }
  table tr td{
    border: 5px solid rgba(255, 255, 255, 0);
  }
  textarea{
    width: 98%;
    height: 5vh;
    font-size: 2.1em;
    padding: 5px;
    background-color: rgba(0, 0, 0, 0.5);
    border: none;
  }
  .c-1,.c-2,.c-3,.c-4{
    width: 25%;
  }
  button{
    width: 100%;
    height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    
  }
  .on, .mais, .todos{
    text-align: center;
    padding: 35% 1%;
    color: white;
  }
  .on{
    border-radius: 50%;
    font-size: 1em;
    background-color: red;
  }
  .mais{
    background-color: red;
    height: 125px;
    vertical-align: middle ;
  }
  .todos{
    background-color: black;
  }
  @media(max-width: 450px){
    .calculadora{
      background-color: rgba(0, 0, 0, 0.644);
      width: 350px;
      margin: 10px;
    }
  }
</style>
<body>
  <main>
    <section>
      <h1>#7DaysOfCode - 7º Dia</h1>
        <p>Essa foi uma semana e tanto né? Praticamos muita coisa sobre lógica de programação com Javascript, porém ainda falta uma coisa muito importante: organizar o nosso código</p>
        <p>E sim, isso é algo obrigatório para aprender como pessoa desenvolvedora, pois uma hora ou outra na sua carreira você precisará dar manutenção no seu código criado, ou até ajeitar algo no código que outra pessoa escreveu.</p><p> Imagina só se esse código estiver todo bagunçado?</p>
        <p>Uma ótima prática é sempre separar cada trecho do seu código que realizará alguma função específica em blocos de código ainda menores, mas que poderão ser reutilizados e chamados a qualquer outro momento ao longo do seu programa. São as chamadas funções</p>
        <h1>Exercício</h1>
        <p>Você já parou para pensar como uma calculadora funciona?</p>
        <p>Ela pede pra você digitar um número, depois você seleciona um tipo de operação com outro número e ela faz sozinha o cálculo pra te mostrar o resultado! Incrível né?</p>
        <p>E então nosso último desafio será criar a nossa própria calculadora, porém com um detalhe muito importante: cada operação deverá ser uma função diferente no nosso código</p>
        <p>A pessoa deverá escolher uma opção de operação impressa pelo programa na tela, depois ela deverá inserir os dois valores que deseja utilizar e o programa deverá imprimir o resultado</p>
        <p>As opções disponíveis deverão ser: soma, multiplicação, divisão, subtração e sair, e nessa última o programa deverá parar de ser executado, mostrando uma mensagem "até a próxima"</p>
        <h1>Dica</h1>
        <p>Cada operação deverá ser uma função diferente no nosso código, que receberá os valores inseridos como parâmetros e retornará o resultado da operação</p>
        <p>Não esqueça de usar estruturas de repetição para fazer a calculadora imprimir a escolha de operação até que a pessoa deseje parar o programa</p>
        <p>Lembre-se também de que além do if e else também temos o switch, muito interessante de se utilizar em casos como esse, de múltipla escolha</p>
        <p>Personalize sua calculadora da maneira que achar mais legal!</p>
    </section>
    <article>
      <div class="calculadora">
        <table>
          <colgroup>
            <col class="c-1">
            <col class="c-2">
            <col class="c-3">
            <col class="c-4">
          </colgroup>
          <caption>Calculadora</caption>
          <thead>
            <tr>
              <td colspan="4">
                <textarea id="resultado" type="text" readonly></textarea>
                </td>
            </tr>
            <tr>
              <td colspan="4">
                <textarea id="calcular" hidden readonly cols="30" rows="10"></textarea>
              </td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td rowspan="2"></td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </article>
  </main>
</body>
<script>
  var ligado_desligado = false
  var variaveisBotoes = [
    {valor:'ON',funcao:'ligar()'},
    {valor:'CE',funcao:'apagar()'},
    {valor:'&frac13;',funcao:'terco(this)'},
    {valor:'&frac14;',funcao:'quarto(this)'},
    {valor:'OFF',funcao:'desligar()'},
    {valor:'&radic;',funcao:'raiz(this)'},
    {valor:'%',funcao:'cincoOperacoes(this)'},
    {valor:'&divide;',funcao:'cincoOperacoes(this)'},
    {valor:'7',funcao:'digitos(this)'},
    {valor:'8',funcao:'digitos(this)'},
    {valor:'9',funcao:'digitos(this)'},
    {valor:'x',funcao:'cincoOperacoes(this)'},
    {valor:'4',funcao:'digitos(this)'},
    {valor:'5',funcao:'digitos(this)'},
    {valor:'6',funcao:'digitos(this)'},
    {valor:'-',funcao:'cincoOperacoes(this)'},
    {valor:'1',funcao:'digitos(this)'},
    {valor:'2',funcao:'digitos(this)'},
    {valor:'3',funcao:'digitos(this)'},
    {valor:'+',funcao:'cincoOperacoes(this)'},
    {valor:'0',funcao:'digitos(this)'},
    {valor:'.',funcao:'digitos(this)'},
    {valor:'=',funcao:'igual(this)'}
  ]
  var td = document.querySelectorAll('td')
  var textareaResultado = document.getElementById('resultado')
  var taxtareaCalcular = document.getElementById('calcular')
  var valorTotal = false
  var igualVariavel = false
  var n1 = ''
  var n2 = ''
  var total = ''
  var operadores = ''
  var calculo = ''

  function todosBotoes(){
    for(var i = 2; i < variaveisBotoes.length+2; i++){
      criarBotao(variaveisBotoes[i-2].valor,i,variaveisBotoes[i-2].funcao)
    }
  }
  
  function criarBotao(texto,n,funcao){
    var button = document.createElement('button')
    button.innerHTML = texto
    td[n].appendChild(button)
    if(n == 2){
      button.setAttribute('class','on')
    }else if(n == 21){
      button.setAttribute('class','mais')
    }else{
      button.setAttribute('class','todos')
    }
    button.setAttribute('onclick',funcao)
  }
  
  function ligar(){
    if(ligado_desligado){
      resetarVariaveis()
      apagar()
    }else{
      cor('white')
      ligado_desligado = true
    }
  }

  function desligar(){
    if(ligado_desligado){
      ligado_desligado = false
      cor('')
      apagar()
    }
    resetarVariaveis()
  }

  function cor(cor){
    taxtareaCalcular.style.backgroundColor = cor
    textareaResultado.style.backgroundColor = cor
  }

  function digitos(obj){
    if(ligado_desligado){
      if(valorTotal){
        apagar()
        valorTotal = false
      }
      if(obj.innerHTML == '.'){
        var liberarPonto = true
        for(var i = 0; i < taxtareaCalcular.value.length;i++){
          if(taxtareaCalcular.value[i] == '.'){
            liberarPonto = false
          }
        }
        if(liberarPonto){
          taxtareaCalcular.value += obj.innerHTML
          acrescenterInputResultado(obj.innerHTML)
        }
      }else{        
        taxtareaCalcular.value += obj.innerHTML
        acrescenterInputResultado(obj.innerHTML)
      }
    }
  }  
  function acrescenterInputResultado(variavel){
    if(ligado_desligado){
      textareaResultado.value += variavel
    }
  }
  
  function cincoOperacoes(obj){
    calculo = ''
    if(n1 == ''){
      n1 = taxtareaCalcular.value
      calculo = obj.innerHTML
      acrescenterInputResultado(calculo)
      taxtareaCalcular.value = ''
    }else{
      n2 = taxtareaCalcular.value
      calculo = obj.innerHTML
      functionCincoOperacoes()
      n1 = total
      taxtareaCalcular.value = ''
    }
  }
  
  function functionCincoOperacoes(){
    if(calculo == '+'){
      total = parseFloat(n1) + parseFloat(n2)
    }else if(calculo == '-'){
      total = parseFloat(n1) - parseFloat(n2)
    }else if(calculo == 'x'){
      total = parseFloat(n1) * parseFloat(n2)
    }else if(calculo == '%'){
      total = parseFloat(n1) / 100 * parseFloat(n2)
    }else{
      total = parseFloat(n1) / parseFloat(n2)
    }
    if(igualVariavel){
      acrescenterInputResultado('=')
      acrescenterInputResultado(total)
    }else{
      acrescenterInputResultado(calculo)
      if(calculo == '%'){
        acrescenterInputResultado('=')
        acrescenterInputResultado(total)
      }
    }
  }
  
  function igual(obj){
    igualVariavel = true
    n2 = taxtareaCalcular.value
    functionCincoOperacoes()  
    valorTotal = true 
    resetarVariaveis()
    igualVariavel = false
  }

  function apagar(){
    taxtareaCalcular.value = ''
    textareaResultado.value = ''
  }

  function raiz(obj){
    var raiz = Math.sqrt(taxtareaCalcular.value)
    fracoes(obj,raiz)
  }

  function terco(obj){
    var terco = taxtareaCalcular.value / 3
    fracoes(obj,terco)
  }

  function quarto(obj){
    var quarto = taxtareaCalcular.value / 4
    fracoes(obj,quarto)
  }
  function fracoes(obj,numero){
    igualVariavel = true
    taxtareaCalcular.value = numero
    acrescenterInputResultado(obj.innerHTML)
    acrescenterInputResultado(numero)
    valorTotal = true 
    igualVariavel = false
    resetarVariaveis()
  }
  function resetarVariaveis(){
    n1 = ''
    n2 = ''
    total = ''
  }
  todosBotoes()
</script>
</html>

